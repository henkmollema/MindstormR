@{
    ViewBag.Title = "Home Page";
}

<style>
    html, body { height: 100%; width: 100%; margin: 0; }
    .container { height: 100%; width: 100%; }
    #controls { height: 100%; width: 50%; }
    #sensors { height: 100%; width: 45%; }
</style>

<div class="container">
    <div id="controls" class="pull-right">
        <a href="#" data-command="forward"><img src="~/Content/Images/arrow_up.png" class="img-responsive" style="width: 30%; position: relative; left: 24%; top: 5%;" /></a>
        <a href="#" data-command="left"><img src="~/Content/Images/arrow_left.png" class="img-responsive pull-left" style="width: 30%; position: relative;" /></a>
        <a href="#" data-command="right"><img src="~/Content/Images/arrow_right.png" class="img-responsive pull-left" style="width: 30%; position: relative; left: 18%;" /></a>
        <a href="#" data-command="backward"><img src="~/Content/Images/arrow_down.png" class="img-responsive" style="width: 30%; position: relative; left: -36%; top: 20%;" /></a>
        <a href="#" data-command="fire"><img src="~/Content/Images/engine.png" class="img-responsive" style="width: 30%; position: relative; top: 0%; left: 54%" /></a>
    </div>
    <div id="sensors">
        <br />
        <table class="table">
            <thead>
                <tr>
                    <th>Sensor</th>
                    <th>Waarde</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Sensor 1</td>
                    <td id="sensor">Waarde 1</td>
                </tr>
                <tr>
                    <td>Sensor 2</td>
                    <td id="sensor2">Waarde 2</td>
                </tr>
                <tr>
                    <td>Sensor 3</td>
                    <td>Waarde 3</td>
                </tr>
                <tr>
                    <td>Sensor 4</td>
                    <td>Waarde 4</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>


@section scripts
{
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">

        var robotId = -1;
        $('#logout').hide();

        $(function CreateDropdown() {
            $.ajax({
                cache: false,
                url: 'http://test.henkmollema.nl/robot/all',
                dataType: 'jsonp',
                success: function (data) {
                    for (var i in data) {
                        $('#robots').append("<li role='presentation'><a href='#' data-id='" + data[i] + "' role='menuitem'>" + "Robot " + data[i] + "</a></li>");
                    }
                    if (data[0] == null) {
                        $('#robots').append("<li role='presentation' class='disabled'><a role='menuitem'>Er zijn geen robots online</a></li>")
                    }
                }
            });
        });

        $(function SelectRobot() {
            $('#robots').on('click', 'a', function () {
                robotId = $(this).data("id");
                if (robotId == null) {
                    robotId = -1;
                }
                else {
                    document.getElementById("dropdown-title").childNodes[0].nodeValue = "Robot " + robotId;
                    $('#logout').show();
                }
            });
        });

        $(function Control() {
            $('#controls').on('click', 'a', function () {
                var command = $(this).data("command");
                if (robotId == -1) {
                    window.alert("Selecteer eerst een robot!");
                }
                $.post(
                    '@Url.Action("ControlClick", "Home")',
                    {
                        'id': robotId,
                        'command': command
                    },
                    function (result) {
                        if (result.success) {
                        }
                    });
            });
        });

        $(function Logout() {
            $('#logout').on('click', 'a', function () {
                $.get("http://test.henkmollema.nl/robot/" + robotId + "/logout");
                robotId = -1;
                setTimeout(function () { location.reload(true) }, 300);
            });
        });
</script>
}

